<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual:  Using the Automatic API Updater</title>
<meta name="description" content="The Unity Manual helps you learn and use the Unity engine. With the Unity engine you can create 2D and 3D games, apps and experiences.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFilesManual/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2854981-1']);
  _gaq.push(['_setDomainName', 'unity3d.com']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  </script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=1492779482"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=1492779482"></script><script type="text/javascript" src="docdata/toc.js?ts=1492779482"></script><script type="text/javascript" src="docdata/global_toc.js?ts=1492779482"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=1492779482">
</head>
<body>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div class="logo"><a href="http://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="http://unity3d.com/">unity3d.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-number">Version: <b>5.6</b> (<a href="https://docs.unity3d.com/2017.1/Documentation/Manual">switch to 2017.1b</a>)</div>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">Language: <span class="b">English</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/APIUpdater.html">English</a></li>
<li><a href="/ja/current/Manual/APIUpdater.html">日本語</a></li>
<li><a href="/es/current/Manual/APIUpdater.html">Español</a></li>
<li><a href="/kr/current/Manual/APIUpdater.html">한국어</a></li>
<li><a href="/ru/current/Manual/APIUpdater.html">Русский</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc"><h2>Unity Manual</h2></div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual (5.6)</a></li>
<li><a href="UnityOverview.html">Working In Unity</a></li>
<li><a href="UpgradeGuides.html">Upgrade Guides</a></li>
<li> Using the Automatic API Updater</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UpgradeGuides.html"></a></span><div class="tip">Upgrade Guides</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UpgradeGuide56.html"></a></span><div class="tip">Upgrading to Unity 5.6</div>
</div>
</div></div>
<h1>Using the Automatic API Updater</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<h2>Why would my code need updating?</h2>

<p>Sometimes, during development of the Unity software, we make the decision to change and improve the way the classes, functions and properties (the API) work. We do this with a focus on causing the least impact on user’s existing game code, but sometimes in order to make things better, we have to break things.</p>

<p>We tend to only introduce these significant “breaking changes” when moving from one significant version of Unity to another, and only in cases that it makes Unity easier to use (meaning users will incur fewer errors) or brings measurable performance gains, and only after careful alternative consideration. However, the upshot of this is that if you were to - for example - open a Unity 4 project in Unity 5, you might find some of the scripting commands that you used have now been changed, removed, or work a little differently.</p>

<p>One obvious example of this is that in Unity 5, we removed the “quick accessors” which allowed you to reference common component types on a GameObject directly, such as <code>gameObject.light</code>, <code>gameObject.camera</code>, <code>gameObject.audioSource</code>, etc.</p>

<p>In Unity 5, you now have to use the GetComponent command for all types, except transform. Therefore if you open a Unity 4 project that uses <code>gameObject.light</code> in Unity 5, you will find that particular line of code is <em>obsolete</em> and needs to be updated.</p>

<h2>The automatic updater</h2>

<p>Unity has an <strong>Automatic Obsolete API Updater</strong> which will detect uses of obsolete code in your scripts, and can offer to automatically update them. If you accept, it will rewrite your code using the updated version of the API. </p>

<figure>
<img src="../uploads/Main/APIUpdaterWarningDialog.png" alt="The API Update dialog">
<figcaption>The API Update dialog</figcaption>
</figure>

<p>Obviously, as always, it’s important to have a backup of your work in case anything goes wrong, but particularly when you’re allowing software to rewrite your code! Once you’ve ensured you have a backup, and clicked the “Go Ahead” button, Unity will rewrite any instances of obsolete code with the recommended updated version.</p>

<p>So, if for example you had a script which did this:</p>

<pre><code>light.color = Color.red;
</code></pre>

<p>Unity’s API updater would convert that for you to:</p>

<pre><code>GetComponent&lt;Light&gt;().color = Color.red;
</code></pre>

<p>The overall workflow of the updater is as follows:</p>

<ol>
<li>Open a project / import a package that contains scripts / assemblies with obsoleted API usage</li>
<li>Unity triggers a script compilation</li>
<li>API updater checks for particular compiler errors that it knows are “updatable”</li>
<li>If we find any occurrence in previous step, show a dialog to user offering automatic update, otherwise, we’ve finished.</li>
<li>If user accepts the update, then run API updater (which will update all scripts written in the same language being compiled in step 2)</li>
<li>Go to step 2 (to take any updated code into account) until no scripts get updated in step 5</li>
</ol>

<p>So, from the list above you can see the updater may run multiple times if there are scripts which fall into different compilation passes (Eg, scripts in different languages, editor scripts, etc) that use obsolete code.</p>

<p>When the API Updater finishes successfully, you will get a notification in the console, like this:</p>

<figure>
<img src="../uploads/Main/APIUpdaterFinishedConsoleLog.png" alt="Success!">
<figcaption>Success!</figcaption>
</figure>

<p>If you choose <em>not</em> to allow the API updater to update your scripts, you will see the script errors in your console as normal. You will also notice that the errors which the API Updater could update automatically are marked as <strong>(UnityUpgradable)</strong> in the error message.</p>

<figure>
<img src="../uploads/Main/APIUpdaterRejectedConsoleErrors.png" alt="Errors in the console, when the API updater is canceled">
<figcaption>Errors in the console, when the API updater is canceled</figcaption>
</figure>

<p>If your script has other errors, in addition to obsolete API uses, the API updater may not be able to fully finish its work until you have fixed the other errors. In this case, you’ll be notified in the console window with a message like this:</p>

<figure>
<img src="../uploads/Main/APIUpdaterOtherErrors.png" alt="Other errors in your scripts can prevent the API updater from working properly.">
<figcaption>Other errors in your scripts can prevent the API updater from working properly.</figcaption>
</figure>

<p>“Some scripts have compilation errors which may prevent obsolete API usages to get updated. Obsolete API updating will continue automatically after these errors get fixed.”</p>

<p>Once you have fixed the other errors in your script, you can run the API updater again. The API updater runs automatically when a script compilation is triggered, but you can also run it manually from the Assets menu, here:</p>

<figure>
<img src="../uploads/Main/APIUpdaterMenuOption.png" alt="The API Updater can be run manually from the Assets menu.">
<figcaption>The API Updater can be run manually from the Assets menu.</figcaption>
</figure>

<h2>Troubleshooting</h2>

<p>If you get a message saying “API Updating failed. Check previous console messages.” this means the API updater encountered a problem that prevented it from finishing its work.</p>

<p>A common cause of this is if the updater was unable to save its changes - if for example - the user does not have rights to modify the updated script. It might be write protected, for instance.</p>

<p>By checking the previous lines in the console as instructed, you should be able to see the problems that occurred during the update process.</p>

<figure>
<img src="../uploads/Main/APIUpdaterFailed.png" alt="In this example the API updater failed because it did not have write permission for the script file.">
<figcaption>In this example the API updater failed because it did not have write permission for the script file.</figcaption>
</figure>

<h2>Limitations</h2>

<p>Not every API change can be automatically fixed by the updater. Below is a list of the current API changes which <strong>cannot</strong> be fixed by the updater:</p>

<ul>
<li>
<code>Mesh.GetTriangleStrip()</code> / <code>SetTriangleStrip()</code>
</li>
<li>TextureImporter: <code>ReadTextureImportInstructions(UnityEditor.TextureImportInstructions, UnityEditor.BuildTarget)</code> -&gt; <code>ReadTextureImportInstructions(UnityEditor.BuildTarget, out UnityEngine.TextureFormat, out UnityEngine.ColorSpace, out System.Int32)</code>
</li>
<li>InteractiveCloth /SkinnedCloth -&gt; Cloth (Not possible at all.)</li>
<li>GameObjectUtility: <code>GetNavMeshLayerNames()</code> -&gt; <code>GetNavMeshAreaNames()</code>
</li>
<li>WWW: <code>WWW(string, byte[], System.Collections.Hashtable)</code> -&gt; <code>WWW(string, byte[], System.Collections.Dictionary)</code>
</li>
<li>AudioClip: <code>Create(string,int,int,int,bool,bool)</code> -&gt; <code>Create(string,int,int,int,bool)</code>
</li>
<li>IPackerPolicy: <code>OnGroupAtlases(UnityEditor.BuildTarget, UnityEditor.Sprites.PackerJob, UnityEditor.TextureImporter[])</code> -&gt; <code>OnGroupAtlases(UnityEditor.BuildTarget, UnityEditor.Sprites.PackerJob, System.Int32[])</code> (completely different param type)</li>
<li><code>PasteToStateMachineFromPasteboard</code></li>
<li><code>CopyStateMachineDataToPasteboard</code></li>
<li>AssetBundle: <code>Load</code> (changed behaviour)</li>
<li>MeshCollider: <code>bool smoothSphereCollisions</code> (removed)</li>
<li>TerrainData: <code>PhysicMaterial physicMaterial</code> (removed)</li>
</ul>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UpgradeGuides.html"></a></span><div class="tip">Upgrade Guides</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UpgradeGuide56.html"></a></span><div class="tip">Upgrading to Unity 5.6</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">
<known_issues><p>Is something described here not working as you expect it to? It might be a <b>Known Issue</b>. Please check with the Issue Tracker at <a href="http://issuetracker.unity3d.com">issuetracker.unity3d.com</a>.</p></known_issues>Copyright © 2017 Unity Technologies. Publication: 5.6-001I. Built: 2017-04-21.</div>
<div class="menu">
<a href="http://unity3d.com/learn">Tutorials</a><a href="http://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="http://forum.unity3d.com">Forums</a><a href="http://unity3d.com/asset-store">Asset Store</a>
</div>
</div></div>
</div></div></div>
</div>
<noscript><iframe src="http://www.googletagmanager.com/ns.html?id=GTM-MC35ML" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'http://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MC35ML');</script>
</body>
</html>
